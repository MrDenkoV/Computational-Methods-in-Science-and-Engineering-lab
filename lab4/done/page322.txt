Gale–Shapley algorithm

In mathematics, economics, and computer science, the Gale–Shapley algorithm (also known as the deferred acceptance algorithm) is an algorithm for finding a solution to the stable matching problem, named for David Gale and Lloyd Shapley.
It takes polynomial time, and the time is linear in the size of the input to the algorithm. Depending on how it is used, it can find either the solution that is optimal for the participants on one side of the matching, or for the participants on the other side. It is a truthful mechanism from the point of view of the participants for whom it provides the optimal solution.

The stable matching problem, in its most basic form, takes as input equal numbers of two types of participants ( men and women, or medical students and internships, for example), and an ordering for each participant giving their preference for whom to be matched to among the participants of the other type. A matching is "not" stable if:

In other words, a matching is stable when there does not exist any match ("A", "B") which both prefer each other to their current partner under the matching.
A stable matching always exists, and the algorithmic problem solved by the Gale–Shapley algorithm is to find one.

In 1962, David Gale and Lloyd Shapley proved that, for any equal number of men and women, it is always possible to solve the SMP and make all marriages stable. They presented an algorithm to do so.

The Gale–Shapley algorithm involves a number of "rounds" (or "iterations"):

The runtime complexity of this algorithm is formula_1 where formula_2 is the number of men or women.

This algorithm guarantees that:


 algorithm stable_matching is

The existence of different stable matchings raises the question: which matching is returned by the Gale-Shapley algorithm? Is it the matching better for men, for women, or the intermediate one? In the above example, the algorithm converges in a single round on the men-optimal solution because each woman receives exactly one proposal, and therefore selects that proposal as her best choice, ensuring that each man has an accepted offer, ending the match.

This is a general fact: the Gale-Shapley algorithm in which men propose to women "always" yields a stable matching that is the "best for all men" among all stable matchings. Similarly, if the women propose then the resulting matching is the "best for all women" among all stable matchings. These two matchings are the top and bottom elements of a larger structure on all stable matchings, the lattice of stable matchings.

To see this, consider the illustration at the right. Let A be the matching generated by the men-proposing algorithm, and B an alternative stable matching that is better for at least one man, say "m". Suppose "m" is matched in B to a woman "w", which he prefers to his match in A. This means that in A, "m" has visited "w", but she rejected him (this is denoted by the green arrow from "m" to "w"). "w" rejected him in favor of some man that she prefers, say "m". So in B, "w" is matched to "m" but "yearns" (wants but unmatched) to "m" (this is denoted by the red arrow from "w" to "m").

Since B is a stable matching, "m" must be matched in B to some woman he prefers to "w", say "w". This means that in A, "m" has visited "w" before arriving at "w", which means that "w" has rejected him. By similar considerations, and since the graph is finite, we must eventually have a directed cycle in which each man was rejected in A by the next woman in the cycle, who rejected him in favor of the next man in the cycle. But this is impossible since such "cycle of rejections" cannot start anywhere: suppose by contradiction that it starts at e.g. "m" - the first man rejected by his adjacent woman ("w"). By assumption, this rejection happens only after "m" comes to "w". But this can happen only after "w" rejects "m" - contradiction to "m" being the first.

The GS algorithm is a truthful mechanism from the point of view of men (the proposing side). I.e, no man can get a better matching for himself by misrepresenting his preferences. Moreover, the GS algorithm is even "group-strategy proof" for men, i.e., no coalition of men can coordinate a misrepresentation of their preferences such that all men in the coalition are strictly better-off. However, it is possible for some coalition to misrepresent their preferences such that some men are better-off and the other men retain the same partner.

The GS algorithm is non-truthful for the women (the reviewing side): each woman may be able to misrepresent her preferences and get a better match.





